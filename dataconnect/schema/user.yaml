name: users
type: table
columns:
  - name: id
    type: string
    primary: true  # Firebase UID
  - name: email
    type: string
    unique: true
  - name: name
    type: string
  - name: auth_provider
    type: string
    enum: [EMAIL, GOOGLE, APPLE]
  - name: platform
    type: string
    enum: [IOS, ANDROID, WEB]
    nullable: true
  - name: firebase_uid
    type: string
    unique: true
  - name: photo_url
    type: string
    nullable: true
  - name: email_verified
    type: boolean
    default: false
  - name: apple_user_identifier
    type: string
    unique: true
    nullable: true
  - name: apple_identity_token
    type: string
    nullable: true
  - name: google_id_token
    type: string
    nullable: true
  - name: google_access_token
    type: string
    nullable: true
  - name: last_sign_in_at
    type: timestamp
    nullable: true
  - name: created_at
    type: timestamp
  - name: updated_at
    type: timestamp

indexes:
  - columns: [email]
  - columns: [firebase_uid]
  - columns: [apple_user_identifier]
  - columns: [auth_provider, platform]
  - columns: [created_at] 